{
  "entities": {
    "AdminUser": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminUser",
      "type": "object",
      "description": "Represents an administrator user with access to the admin dashboard.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the AdminUser entity."
        },
        "username": {
          "type": "string",
          "description": "Admin's username for logging in."
        },
        "email": {
          "type": "string",
          "description": "Admin's email address.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "Billboard": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Billboard",
      "type": "object",
      "description": "Represents a billboard advertisement location.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the billboard."
        },
        "location": {
          "type": "string",
          "description": "Address of the billboard."
        },
        "lat": {
          "type": "number",
          "description": "Latitude of the billboard location."
        },
        "lng": {
          "type": "number",
          "description": "Longitude of the billboard location."
        },
        "dimensions": {
          "type": "string",
          "description": "Dimensions of the billboard (e.g., 10ft x 20ft)."
        },
        "weeklyImpressions": {
          "type": "number",
          "description": "Estimated number of people who view the billboard weekly."
        },
        "imageId": {
          "type": "string",
          "description": "ID for the placeholder image."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL for a custom uploaded image.",
          "format": "uri"
        }
      },
      "required": [
        "name",
        "location",
        "lat",
        "lng",
        "dimensions",
        "weeklyImpressions",
        "imageId"
      ]
    },
    "ContactInquiry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Contact Inquiry",
      "type": "object",
      "description": "Represents a message submitted through the contact form.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Sender's name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Sender's email."
        },
        "company": {
          "type": "string",
          "description": "Sender's company (optional)."
        },
        "message": {
          "type": "string",
          "description": "The content of the message."
        },
        "submittedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the message was submitted."
        }
      },
      "required": [
        "name",
        "email",
        "message",
        "submittedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/billboards/{billboardId}",
        "definition": {
          "entityName": "Billboard",
          "schema": {
            "$ref": "#/backend/entities/Billboard"
          },
          "description": "Stores information about each billboard location. Includes details like location name, image URL, dimensions, and estimated reach.",
          "params": [
            {
              "name": "billboardId",
              "description": "Unique identifier for the billboard."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{adminId}",
        "definition": {
          "entityName": "AdminUser",
          "schema": {
            "$ref": "#/backend/entities/AdminUser"
          },
          "description": "Collection to store admin user roles. The existence of a document indicates admin privileges.",
          "params": [
            {
              "name": "adminId",
              "description": "The unique user ID of the administrator."
            }
          ]
        }
      },
      {
        "path": "/admin_users/{adminUserId}",
        "definition": {
          "entityName": "AdminUser",
          "schema": {
            "$ref": "#/backend/entities/AdminUser"
          },
          "description": "Collection to store admin user information. Includes details like username and email.",
          "params": [
            {
              "name": "adminUserId",
              "description": "Unique identifier for the admin user."
            }
          ]
        }
      },
      {
        "path": "/inquiries/{inquiryId}",
        "definition": {
          "entityName": "ContactInquiry",
          "schema": {
            "$ref": "#/backend/entities/ContactInquiry"
          },
          "description": "Stores messages submitted through the website's contact form.",
          "params": [
            {
              "name": "inquiryId",
              "description": "Unique identifier for the inquiry."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to securely manage billboard data and admin users while ensuring authorization independence and supporting list operations. Admins are managed via a dedicated collection `roles_admin` for simplified role-based access control. Billboard data is stored in a flat collection `/billboards` for easy querying and display on the website. Since the app requires an admin user, a collection `/admin_users` is needed to manage them. To store contact form submissions, a new `/inquiries` collection is added. It is publicly writable but only readable by admins.\n\nAuthorization Independence: The structure achieves authorization independence by using the `/roles_admin/{uid}` collection for admin role management. This allows us to check admin status based on document existence instead of relying on `get()` calls to other collections, ensuring atomic operations.\n\nQAPs Support: Secure list operations are supported by segregating admin role data into a separate collection (`/roles_admin`). Security rules can efficiently check for the existence of a document in this collection to grant or deny access to sensitive data and functionalities. The billboards are placed in a flat collection with no subcollections. This collection enables simple querying and displaying."
  }
}